%!PS-Adobe-2.0
%%Creator: dvips(k) 5.86 Copyright 1999 Radical Eye Software
%%Title: malloclab.dvi
%%Pages: 9
%%PageOrder: Ascend
%%BoundingBox: 0 0 612 792
%%DocumentFonts: Times-Roman Courier Times-Bold Times-Italic
%%+ Courier-Oblique
%%EndComments
%DVIPSWebPage: (www.radicaleye.com)
%DVIPSCommandLine: dvips -o malloclab.ps malloclab.dvi
%DVIPSParameters: dpi=600, compressed
%DVIPSSource:  TeX output 2003.03.25:2140
%%BeginProcSet: texc.pro
%!
/TeXDict 300 dict def TeXDict begin/N{def}def/B{bind def}N/S{exch}N/X{S
N}B/A{dup}B/TR{translate}N/isls false N/vsize 11 72 mul N/hsize 8.5 72
mul N/landplus90{false}def/@rigin{isls{[0 landplus90{1 -1}{-1 1}ifelse 0
0 0]concat}if 72 Resolution div 72 VResolution div neg scale isls{
landplus90{VResolution 72 div vsize mul 0 exch}{Resolution -72 div hsize
mul 0}ifelse TR}if Resolution VResolution vsize -72 div 1 add mul TR[
matrix currentmatrix{A A round sub abs 0.00001 lt{round}if}forall round
exch round exch]setmatrix}N/@landscape{/isls true N}B/@manualfeed{
statusdict/manualfeed true put}B/@copies{/#copies X}B/FMat[1 0 0 -1 0 0]
N/FBB[0 0 0 0]N/nn 0 N/IEn 0 N/ctr 0 N/df-tail{/nn 8 dict N nn begin
/FontType 3 N/FontMatrix fntrx N/FontBBox FBB N string/base X array
/BitMaps X/BuildChar{CharBuilder}N/Encoding IEn N end A{/foo setfont}2
array copy cvx N load 0 nn put/ctr 0 N[}B/sf 0 N/df{/sf 1 N/fntrx FMat N
df-tail}B/dfs{div/sf X/fntrx[sf 0 0 sf neg 0 0]N df-tail}B/E{pop nn A
definefont setfont}B/Cw{Cd A length 5 sub get}B/Ch{Cd A length 4 sub get
}B/Cx{128 Cd A length 3 sub get sub}B/Cy{Cd A length 2 sub get 127 sub}
B/Cdx{Cd A length 1 sub get}B/Ci{Cd A type/stringtype ne{ctr get/ctr ctr
1 add N}if}B/id 0 N/rw 0 N/rc 0 N/gp 0 N/cp 0 N/G 0 N/CharBuilder{save 3
1 roll S A/base get 2 index get S/BitMaps get S get/Cd X pop/ctr 0 N Cdx
0 Cx Cy Ch sub Cx Cw add Cy setcachedevice Cw Ch true[1 0 0 -1 -.1 Cx
sub Cy .1 sub]/id Ci N/rw Cw 7 add 8 idiv string N/rc 0 N/gp 0 N/cp 0 N{
rc 0 ne{rc 1 sub/rc X rw}{G}ifelse}imagemask restore}B/G{{id gp get/gp
gp 1 add N A 18 mod S 18 idiv pl S get exec}loop}B/adv{cp add/cp X}B
/chg{rw cp id gp 4 index getinterval putinterval A gp add/gp X adv}B/nd{
/cp 0 N rw exit}B/lsh{rw cp 2 copy get A 0 eq{pop 1}{A 255 eq{pop 254}{
A A add 255 and S 1 and or}ifelse}ifelse put 1 adv}B/rsh{rw cp 2 copy
get A 0 eq{pop 128}{A 255 eq{pop 127}{A 2 idiv S 128 and or}ifelse}
ifelse put 1 adv}B/clr{rw cp 2 index string putinterval adv}B/set{rw cp
fillstr 0 4 index getinterval putinterval adv}B/fillstr 18 string 0 1 17
{2 copy 255 put pop}for N/pl[{adv 1 chg}{adv 1 chg nd}{1 add chg}{1 add
chg nd}{adv lsh}{adv lsh nd}{adv rsh}{adv rsh nd}{1 add adv}{/rc X nd}{
1 add set}{1 add clr}{adv 2 chg}{adv 2 chg nd}{pop nd}]A{bind pop}
forall N/D{/cc X A type/stringtype ne{]}if nn/base get cc ctr put nn
/BitMaps get S ctr S sf 1 ne{A A length 1 sub A 2 index S get sf div put
}if put/ctr ctr 1 add N}B/I{cc 1 add D}B/bop{userdict/bop-hook known{
bop-hook}if/SI save N @rigin 0 0 moveto/V matrix currentmatrix A 1 get A
mul exch 0 get A mul add .99 lt{/QV}{/RV}ifelse load def pop pop}N/eop{
SI restore userdict/eop-hook known{eop-hook}if showpage}N/@start{
userdict/start-hook known{start-hook}if pop/VResolution X/Resolution X
1000 div/DVImag X/IEn 256 array N 2 string 0 1 255{IEn S A 360 add 36 4
index cvrs cvn put}for pop 65781.76 div/vsize X 65781.76 div/hsize X}N
/p{show}N/RMat[1 0 0 -1 0 0]N/BDot 260 string N/Rx 0 N/Ry 0 N/V{}B/RV/v{
/Ry X/Rx X V}B statusdict begin/product where{pop false[(Display)(NeXT)
(LaserWriter 16/600)]{A length product length le{A length product exch 0
exch getinterval eq{pop true exit}if}{pop}ifelse}forall}{false}ifelse
end{{gsave TR -.1 .1 TR 1 1 scale Rx Ry false RMat{BDot}imagemask
grestore}}{{gsave TR -.1 .1 TR Rx Ry scale 1 1 false RMat{BDot}
imagemask grestore}}ifelse B/QV{gsave newpath transform round exch round
exch itransform moveto Rx 0 rlineto 0 Ry neg rlineto Rx neg 0 rlineto
fill grestore}B/a{moveto}B/delta 0 N/tail{A/delta X 0 rmoveto}B/M{S p
delta add tail}B/b{S p tail}B/c{-4 M}B/d{-3 M}B/e{-2 M}B/f{-1 M}B/g{0 M}
B/h{1 M}B/i{2 M}B/j{3 M}B/k{4 M}B/w{0 rmoveto}B/l{p -4 w}B/m{p -3 w}B/n{
p -2 w}B/o{p -1 w}B/q{p 1 w}B/r{p 2 w}B/s{p 3 w}B/t{p 4 w}B/x{0 S
rmoveto}B/y{3 2 roll p a}B/bos{/SS save N}B/eos{SS restore}B end

%%EndProcSet
%%BeginProcSet: 8r.enc
% @@psencodingfile@{
%   author = "S. Rahtz, P. MacKay, Alan Jeffrey, B. Horn, K. Berry",
%   version = "0.6",
%   date = "1 July 1998",
%   filename = "8r.enc",
%   email = "tex-fonts@@tug.org",
%   docstring = "Encoding for TrueType or Type 1 fonts
%                to be used with TeX."
% @}
% 
% Idea is to have all the characters normally included in Type 1 fonts
% available for typesetting. This is effectively the characters in Adobe
% Standard Encoding + ISO Latin 1 + extra characters from Lucida.
% 
% Character code assignments were made as follows:
% 
% (1) the Windows ANSI characters are almost all in their Windows ANSI
% positions, because some Windows users cannot easily reencode the
% fonts, and it makes no difference on other systems. The only Windows
% ANSI characters not available are those that make no sense for
% typesetting -- rubout (127 decimal), nobreakspace (160), softhyphen
% (173). quotesingle and grave are moved just because it's such an
% irritation not having them in TeX positions.
% 
% (2) Remaining characters are assigned arbitrarily to the lower part
% of the range, avoiding 0, 10 and 13 in case we meet dumb software.
% 
% (3) Y&Y Lucida Bright includes some extra text characters; in the
% hopes that other PostScript fonts, perhaps created for public
% consumption, will include them, they are included starting at 0x12.
% 
% (4) Remaining positions left undefined are for use in (hopefully)
% upward-compatible revisions, if someday more characters are generally
% available.
% 
% (5) hyphen appears twice for compatibility with both 
% ASCII and Windows.
% 
/TeXBase1Encoding [
% 0x00 (encoded characters from Adobe Standard not in Windows 3.1)
  /.notdef /dotaccent /fi /fl
  /fraction /hungarumlaut /Lslash /lslash
  /ogonek /ring /.notdef
  /breve /minus /.notdef 
% These are the only two remaining unencoded characters, so may as
% well include them.
  /Zcaron /zcaron 
% 0x10
 /caron /dotlessi 
% (unusual TeX characters available in, e.g., Lucida Bright)
 /dotlessj /ff /ffi /ffl 
 /.notdef /.notdef /.notdef /.notdef
 /.notdef /.notdef /.notdef /.notdef
 % very contentious; it's so painful not having quoteleft and quoteright
 % at 96 and 145 that we move the things normally found there to here.
 /grave /quotesingle 
% 0x20 (ASCII begins)
 /space /exclam /quotedbl /numbersign
 /dollar /percent /ampersand /quoteright
 /parenleft /parenright /asterisk /plus /comma /hyphen /period /slash
% 0x30
 /zero /one /two /three /four /five /six /seven
 /eight /nine /colon /semicolon /less /equal /greater /question
% 0x40
 /at /A /B /C /D /E /F /G /H /I /J /K /L /M /N /O
% 0x50
 /P /Q /R /S /T /U /V /W
 /X /Y /Z /bracketleft /backslash /bracketright /asciicircum /underscore
% 0x60
 /quoteleft /a /b /c /d /e /f /g /h /i /j /k /l /m /n /o
% 0x70
 /p /q /r /s /t /u /v /w
 /x /y /z /braceleft /bar /braceright /asciitilde
 /.notdef % rubout; ASCII ends
% 0x80
 /.notdef /.notdef /quotesinglbase /florin
 /quotedblbase /ellipsis /dagger /daggerdbl
 /circumflex /perthousand /Scaron /guilsinglleft
 /OE /.notdef /.notdef /.notdef
% 0x90
 /.notdef /.notdef /.notdef /quotedblleft
 /quotedblright /bullet /endash /emdash
 /tilde /trademark /scaron /guilsinglright
 /oe /.notdef /.notdef /Ydieresis
% 0xA0
 /.notdef % nobreakspace
 /exclamdown /cent /sterling
 /currency /yen /brokenbar /section
 /dieresis /copyright /ordfeminine /guillemotleft
 /logicalnot
 /hyphen % Y&Y (also at 45); Windows' softhyphen
 /registered
 /macron
% 0xD0
 /degree /plusminus /twosuperior /threesuperior
 /acute /mu /paragraph /periodcentered
 /cedilla /onesuperior /ordmasculine /guillemotright
 /onequarter /onehalf /threequarters /questiondown
% 0xC0
 /Agrave /Aacute /Acircumflex /Atilde /Adieresis /Aring /AE /Ccedilla
 /Egrave /Eacute /Ecircumflex /Edieresis
 /Igrave /Iacute /Icircumflex /Idieresis
% 0xD0
 /Eth /Ntilde /Ograve /Oacute
 /Ocircumflex /Otilde /Odieresis /multiply
 /Oslash /Ugrave /Uacute /Ucircumflex
 /Udieresis /Yacute /Thorn /germandbls
% 0xE0
 /agrave /aacute /acircumflex /atilde
 /adieresis /aring /ae /ccedilla
 /egrave /eacute /ecircumflex /edieresis
 /igrave /iacute /icircumflex /idieresis
% 0xF0
 /eth /ntilde /ograve /oacute
 /ocircumflex /otilde /odieresis /divide
 /oslash /ugrave /uacute /ucircumflex
 /udieresis /yacute /thorn /ydieresis
] def

%%EndProcSet
%%BeginProcSet: texps.pro
%!
TeXDict begin/rf{findfont dup length 1 add dict begin{1 index/FID ne 2
index/UniqueID ne and{def}{pop pop}ifelse}forall[1 index 0 6 -1 roll
exec 0 exch 5 -1 roll VResolution Resolution div mul neg 0 0]/Metrics
exch def dict begin Encoding{exch dup type/integertype ne{pop pop 1 sub
dup 0 le{pop}{[}ifelse}{FontMatrix 0 get div Metrics 0 get div def}
ifelse}forall Metrics/Metrics currentdict end def[2 index currentdict
end definefont 3 -1 roll makefont/setfont cvx]cvx def}def/ObliqueSlant{
dup sin S cos div neg}B/SlantFont{4 index mul add}def/ExtendFont{3 -1
roll mul exch}def/ReEncodeFont{CharStrings rcheck{/Encoding false def
dup[exch{dup CharStrings exch known not{pop/.notdef/Encoding true def}
if}forall Encoding{]exch pop}{cleartomark}ifelse}if/Encoding exch def}
def end

%%EndProcSet
TeXDict begin 40258431 52099146 1000 600 600 (malloclab.dvi)
@start
%DVIPSBitmapFont: Fa cmmi8 8 3
/Fa 3 121 df<EB07E0EB1FF890387C1CE0EBF80D3801F00F3803E007EA07C0120FD81F
8013C0A2EA3F00140F481480127EA2141F00FE14005AA2EC3F02EC3E06A25AEC7E0E007C
EBFE0C14FC0101131C393E07BE18391F0E1E38390FFC0FF03903F003C01F1F7D9D25>97
D<27078007F0137E3C1FE01FFC03FF803C18F0781F0783E03B3878E00F1E01263079C001
B87F26707F8013B00060010013F001FE14E000E015C0485A4914800081021F130300015F
491400A200034A13076049133E170F0007027EEC8080188149017C131F1801000F02FCEB
3F03053E130049495C180E001F0101EC1E0C183C010049EB0FF0000E6D48EB03E0391F7E
9D3E>109 D<013F137C9038FFC1FF3A01C1E383803A0380F703C0390700F60F000E13FE
4813FC12180038EC0700003049C7FCA2EA200100005BA313035CA301075B5D14C000385C
D87C0F130600FC140E011F130C011B131C39F03BE038D8707113F0393FE0FFC0260F803F
C7FC221F7E9D28>120 D E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: Fb cmex10 10 2
/Fb 2 20 df<160F161F163E167C16F8ED01F0ED03E0ED07C0150FED1F801600153E157E
5D4A5A5D14034A5A5D140F4A5AA24AC7FC143E147E5CA2495AA2495AA2495AA2130F5CA2
495AA2133F91C8FCA25B137E13FEA25B1201A25B1203A35B1207A35B120FA35BA2121FA4
5B123FA690C9FC5AAA12FEB3AC127FAA7E7FA6121F7FA4120FA27FA312077FA312037FA3
12017FA212007FA2137E137F7FA280131FA26D7EA2801307A26D7EA26D7EA26D7EA2147E
143E143F6E7EA26E7E1407816E7E1401816E7E157E153E811680ED0FC01507ED03E0ED01
F0ED00F8167C163E161F160F28C66E823D>18 D<12F07E127C7E7E6C7E6C7E6C7E7F6C7E
1200137C137E7F6D7E130F806D7E1303806D7EA26D7E147C147E80A26E7EA26E7EA26E7E
A2811403A26E7EA2811400A281157E157FA2811680A2151F16C0A3150F16E0A3150716F0
A31503A216F8A4150116FCA6150016FEAA167FB3AC16FEAA16FC1501A616F81503A416F0
A21507A316E0150FA316C0151FA31680153FA216005DA2157E15FE5DA214015DA24A5AA2
14075DA24A5AA24A5AA24AC7FCA2147E147C14FC495AA2495A5C1307495A5C131F49C8FC
137E137C5B1201485A5B485A485A48C9FC123E5A5A5A28C67E823D>I
E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: Fc cmmi10 10.95 6
/Fc 6 120 df<121EEA7F80A2EAFFC0A4EA7F80A2EA1E000A0A798919>58
D<121EEA7F8012FF13C0A213E0A3127FEA1E601200A413E013C0A312011380120313005A
120E5A1218123812300B1C798919>I<49B712F018FF19C0D9000190C76C7EF00FF84BEC
03FC1801020382727E5DA214071A805DA2140F4E13005DA2021F5E18034B5D1807023F5E
4E5A4B4A5A4E5A027F4B5A06FEC7FC4BEB03FCEF3FF091B712C005FCC8FC92CBFCA25BA2
5CA21303A25CA21307A25CA2130FA25CA2131FA25CA2133FA25C497EB612E0A3413E7DBD
3A>80 D<48B912FCA25A913A0003FE000F01F84A1301D807E0EE00F8491307491778000F
5D90C7FC001E140FA2001C4B1470123C0038141FA200785D1270033F15F000F018E0485D
C81600157FA25EA215FFA293C9FCA25CA25DA21403A25DA21407A25DA2140FA25DA2141F
A25DA2143FA25DA2147FA214FF497F001FB612FCA25E3E3D7FBC35>84
D<007FB500F090387FFFFE19FC5D26007FE0C7000313804A913800FC004A5D187001FF16
F0A291C95AA2481601605BA200031603605BA20007160795C7FC5BA2000F5E170E5BA200
1F161E171C5BA2003F163C17385BA2007F1678A2491570A200FF16F0A290C95AA216015F
5A16035F16074CC8FC160E161E5E007F5D5E6C4A5A6D495A6C6C495A6C6C011FC9FC6C6C
137E3903FC03F8C6B512E0013F1380D907FCCAFC3F407ABD3E>I<017CEE038048B40207
EB0FE02603C7C090391F801FF0EA0703000F7F000E153F001C16000107160F003817074C
1303D8780F027E130100705B1800D8F01F14FE4A4914E01200133FDA000114014C14C05B
137E0303140301FE4A14805BA2F0070000011407494A5B180EA260A2030F5C12006D011F
5C017C496C5B017E0139495A6D903870F80390281F81E07C0FC7FC903A07FFC01FFE0100
90380007F03C297EA741>119 D E
%EndDVIPSBitmapFont
/Fd 133[55 55 3[55 55 55 55 1[55 55 55 55 55 2[55 55
55 55 55 55 55 55 55 9[55 3[55 4[55 12[55 2[55 1[55 1[55
16[55 55 40[{TeXBase1Encoding ReEncodeFont}29 90.9091
/Courier-Oblique rf
%DVIPSBitmapFont: Fe cmr10 10.95 14
/Fe 14 111 df<013F4C7ED9FFC04B7E2601E0E015072607C070150F48486C4B5A023E4B
C7FC48486C5D48D90FC0EB01FE003ED90EF0EB07FCDA0F3F133E007E903A070FFFF8F800
7C0200EBC1F0EE000300FC6D6C495A604D5A171F95C8FC173E177E177C5F16015F007C49
48485A1607007E5E003E49495A020E131F003F93C9FC6C49133E260F803C137E0238137C
6C6C485B3901E0E0016CB448485AD93F0049133F90C74848EBFFC0030F903801E0E09339
8007C0704B4848487E4B153C033E90381F001C4B497F03FC133E4B150F4A48017E7F0203
147C5D4A4801FCEB0380140F5D4AC7FC5C143E5C14FC5C495A13034948027CEB07005C49
48147E011F033E5B91C8140E013E153F017E6F5B017C92380F803C4917380001706C5A49
923801E0E0496FB45A6C48043FC7FC41497BC34C>37 D<1430147014E0EB01C0EB038013
07EB0F00131E133E133C5B13F85B12015B1203A2485AA2120F5BA2121F90C7FCA25AA312
3E127EA6127C12FCB2127C127EA6123E123FA37EA27F120FA27F1207A26C7EA212017F12
007F13787F133E131E7FEB07801303EB01C0EB00E014701430145A77C323>40
D<12C07E12707E7E121E7E6C7E7F12036C7E7F12007F1378137CA27FA2133F7FA2148013
0FA214C0A3130714E0A6130314F0B214E01307A614C0130FA31480A2131F1400A25B133E
A25BA2137813F85B12015B485A12075B48C7FC121E121C5A5A5A5A145A7BC323>I<1506
150FB3A9007FB912E0BA12F0A26C18E0C8000FC9FCB3A915063C3C7BB447>43
D<EB01FE90380FFFC090383F03F090387C00F849137C48487F48487F4848EB0F80A2000F
15C04848EB07E0A3003F15F0A290C712034815F8A64815FCB3A26C15F8A56C6CEB07F0A3
001F15E0A36C6CEB0FC0A26C6CEB1F80000315006C6C133E6C6C5B017C5B90383F03F090
380FFFC0D901FEC7FC263F7DBC2D>48 D<EB01C013031307131F137FEA07FFB5FC139FEA
F81F1200B3B3ACEB7FF0B612F8A31D3D78BC2D>I<EB07FC90383FFF8090B512E03903F0
1FF83907C007FC390F0001FE001E6D7E001C1580003CEC7FC05AED3FE01270B4FC6DEB1F
F07FA56C5A6CC7FC120CC813E0153FA216C0157F168015FF16004A5A5D4A5A4A5A5D4A5A
4A5A4AC7FC147E147C5C495A495A495A495A49C71270133E133C5B4914E0485A485A485A
48C7120148B6FCA25A4815C0B7FCA3243D7CBC2D>I<EB07FC90383FFF809038F80FE039
01E003F839078001FCD80F007F000E6D7E001E1580D81F80137F486C14C07FA27F5BA212
1F6C5AC8138015FF1600A24A5AA24A5A5DEC07E04A5A023FC7FCEB1FFCECFF809038000F
E0EC07F86E7E6E7E6E7E1680ED7FC0A216E0153FA216F0A2120C123F487E487EA316E0A2
49137F6CC713C01278EDFF807E6C4913006C495A3907C007FC3903F80FF0C6B55A013F13
80D907F8C7FC243F7CBC2D>I<150E151E153EA2157EA215FE1401A21403EC077E140614
0E141CA214381470A214E0EB01C0A2EB0380EB0700A2130E5BA25B5BA25B5B1201485A90
C7FC5A120E120C121C5AA25A5AB8FCA3C8EAFE00AC4A7E49B6FCA3283E7EBD2D>I<EC1F
E0ECFFF8903803F03E90380FC00F90391F000780133E017EEB1FC049133F4848137F1203
5B12074848EB3F80ED1F00001F91C7FC5BA2123FA3485AA214FE903887FF8039FF8F07E0
90389C01F09038B800FC01B0137E13F0497F16804914C0A2ED1FE0A34914F0A5127FA612
3F6D14E0A2121FED3FC0A26C6C1480A20007EC7F006C6C137E6C6C5B6C6C485A90387E07
F06DB45A010F1380D903FCC7FC243F7CBC2D>54 D<007FB912E0BA12F0A26C18E0CDFCAE
007FB912E0BA12F0A26C18E03C167BA147>61 D<EA01E0EA07F8A2487EA46C5AA2EA01E0
C8FCACEA01FC127FA3120712031201B3AC487EB512F0A3143E7DBD1A>105
D<2701F801FE14FF00FF902707FFC00313E0913B1E07E00F03F0913B7803F03C01F80007
903BE001F87000FC2603F9C06D487F000101805C01FBD900FF147F91C75B13FF4992C7FC
A2495CB3A6486C496CECFF80B5D8F87FD9FC3F13FEA347287DA74C>109
D<3901F801FE00FF903807FFC091381E07E091387803F000079038E001F82603F9C07F00
01138001FB6D7E91C7FC13FF5BA25BB3A6486C497EB5D8F87F13FCA32E287DA733>I
E
%EndDVIPSBitmapFont
/Ff 133[35 40 40 61 40 45 25 35 35 1[45 45 45 66 25 40
1[25 45 45 25 40 45 40 45 45 11[66 51 45 2[56 10[56 1[61
13[45 45 1[45 1[45 1[23 4[30 30 6[30 30[45 2[{
TeXBase1Encoding ReEncodeFont}39 90.9091 /Times-Italic
rf
%DVIPSBitmapFont: Fg cmsy10 10.95 2
/Fg 2 16 df<007FB812FEBAFCA26C17FE3804799847>0 D<EB0FFCEB3FFF90B512C000
0314F04880488048804880A2481580A3B712C0AA6C1580A36C1500A26C5C6C5C6C5C6C5C
C614C0013F90C7FCEB0FFC22227BA72D>15 D E
%EndDVIPSBitmapFont
/Fh 105[45 27[40 45 4[30 35 40 1[51 45 51 1[25 2[25 3[40
3[45 50[23 46[{TeXBase1Encoding ReEncodeFont}14 90.9091
/Times-Bold rf /Fi 134[60 1[86 60 66 40 47 53 1[66 60
66 100 33 66 1[33 66 60 1[53 66 53 66 60 9[120 2[80 66
86 1[73 93 1[113 80 2[47 93 2[80 86 86 9[60 60 60 60
60 60 60 60 60 60 2[40 45[{TeXBase1Encoding ReEncodeFont}45
119.552 /Times-Bold rf /Fj 133[55 55 55 55 55 55 55 55
55 55 55 55 55 55 55 55 1[55 55 55 55 55 55 55 55 55
1[55 8[55 2[55 3[55 2[55 55 4[55 1[55 55 55 1[55 1[55
55 55 55 55 1[55 55 55 55 55 55 55 55 55 55 55 55 55
55 55 55 55 3[55 36[{TeXBase1Encoding ReEncodeFont}59
90.9091 /Courier rf /Fk 107[40 40 24[40 45 45 66 45 45
25 35 30 45 45 45 45 71 25 45 25 25 45 45 30 40 45 40
45 40 7[66 1[86 66 66 56 51 61 1[51 66 66 81 56 66 1[30
66 1[51 56 66 61 61 66 1[40 3[25 25 45 45 45 45 45 45
45 45 45 45 25 23 30 23 51 1[30 30 30 5[30 29[51 51 2[{
TeXBase1Encoding ReEncodeFont}73 90.9091 /Times-Roman
rf /Fl 134[72 3[72 40 56 48 1[72 72 72 112 40 2[40 72
72 1[64 72 64 72 64 9[135 2[88 80 2[80 2[128 88 7[104
96 1[104 6[40 72 72 1[72 72 1[72 72 72 72 3[36 44[{
TeXBase1Encoding ReEncodeFont}37 143.462 /Times-Roman
rf end
%%EndProlog
%%BeginSetup
%%Feature: *Resolution 600dpi
TeXDict begin
%%PaperSize: Letter

%%EndSetup
%%Page: 1 1
1 0 bop 1345 937 a Fl(CS)35 b(213,)g(Spring)g(2003)492
1120 y(Malloc)g(Lab:)43 b(Writing)35 b(a)h(Dynamic)d(Storage)i
(Allocator)1103 1303 y(Assigned:)42 b(T)-6 b(uesday)34
b(March)g(18)894 1485 y(Due:)44 b(W)-11 b(ednesday)33
b(April)i(16,)g(11:59PM)0 2165 y Fk(Da)n(v)o(e)23 b(K)m(oes)h(\()p
Fj(dkoes@andrew.cm)o(u.)o(ed)o(u)p Fk(\))17 b(is)23 b(the)h(lead)g
(person)h(for)f(this)g(assignment.)0 2497 y Fi(1)119
b(Intr)n(oduction)0 2743 y Fk(In)31 b(this)g(lab)g(you)h(will)e(be)h
(writing)h(a)e(dynamic)i(storage)h(allocator)g(for)e(C)f(programs,)k
(i.e.,)e(your)f(o)n(wn)g(v)o(ersion)h(of)f(the)0 2856
y Fj(malloc)p Fk(,)c Fj(realloc)p Fk(,)f(and)k Fj(free)d
Fk(routines.)48 b(Y)-10 b(ou)29 b(are)h(encouraged)i(to)d(e)o(xplore)i
(the)f(design)h(space)f(creati)n(v)o(ely)h(and)0 2969
y(implement)25 b(an)e(allocator)j(that)e(is)f(correct,)i(ef)n
(\002cient)g(and)f(f)o(ast.)0 3301 y Fi(2)119 b(Logistics)0
3547 y Fk(Y)-10 b(ou)22 b(may)g(w)o(ork)g(in)g(a)g(group)h(of)f(up)g
(to)g(tw)o(o)g(people.)30 b(The)22 b(only)g(\223hand-in\224)j(will)d
(be)g(electronic.)31 b(An)o(y)22 b(clari\002cations)i(and)0
3660 y(re)n(visions)i(to)d(the)h(assignment)i(will)d(be)h(posted)h(on)e
(the)h(course)h(web)e(page)i(and)f(on)f(the)h(course)h(bboard.)0
3812 y(In)e(the)h(past,)f(we)g(ha)n(v)o(e)h(had)f(some)h(unfortunate)i
(cheating)g(incidents)f(in)f(this)f(lab)l(.)30 b(W)-7
b(e)22 b(will)h(be)g(running)i(a)e(cheatcheck)o(er)0
3925 y(on)h(your)h(code)g(against)g(solutions)i(from)d(the)g(pre)n
(vious)i(years.)32 b(W)-7 b(e)23 b(encourage)k(you)d(to)g(talk)h(to)f
(your)h(classmates)h(about)0 4037 y(solution)c(strate)o(gies.)29
b(Ho)n(we)n(v)o(er)l(,)20 b(you)g(must)g(write)f(your)i(code)f
(yourself.)30 b(There)19 b(will)h(be)f(some)h(partial)h(credit)g(for)e
(design)0 4150 y(and)24 b(ef)n(fort,)g(e)n(v)o(en)g(if)g(the)g
(solution)i(is)d(incomplete)j(or)e(incorrect.)31 b(This)24
b(lab)g(is)f(signi\002cantly)k(harder)e(than)f(the)g(others,)h(so)0
4263 y Fh(start)f(early)-6 b(.)0 4595 y Fi(3)119 b(Hand)31
b(Out)f(Instructions)0 4841 y Fk(The)23 b(\002les)g(for)h(this)g
(assignment)i(can)e(be)f(retrie)n(v)o(ed)j(from)0 4993
y Fj(/afs/cs/academi)o(c/)o(cl)o(as)o(s/1)o(52)o(13)o(-s)o(03)o(/la)o
(bs)o(/L)o(6/)o(ma)o(llo)o(cl)o(ab)o(-h)o(an)o(dou)o(t.)o(ta)o(r)0
5145 y Fk(Once)39 b(you')-5 b(v)o(e)42 b(copied)f(this)e(\002le)g(into)
h(a)f(\(protected\))k(directory)-6 b(,)45 b(run)40 b(the)g(command)g
Fj(tar)53 b(xvf)g(malloclab-)0 5258 y(handout.tar)27
b Fk(to)32 b(e)o(xpand)i(the)f(tar\002le.)56 b(Fill)32
b(in)h(your)g(team)g(information)i(in)d(the)h(structure)i(at)d(the)h
(be)o(ginning)i(of)0 5371 y(the)21 b(\002le)f Fj(mm.c)p
Fk(.)26 b(Use)20 b(your)i(group)g(id)e(as)h(your)h(team)f(name.)28
b(Y)-10 b(our)20 b(group)i(id)f(is)g(of)g(the)g(form)g
Fj(userid1+userid)o(2)p Fk(,)14 b(or)1924 5712 y(1)p
eop
%%Page: 2 2
2 1 bop 0 573 a Fk(just)25 b Fj(userid)c Fk(if)j(you')-5
b(re)26 b(not)f(w)o(orking)h(in)e(a)g(group)i(\(ie,)e
Fj(dkoes+sethg)19 b Fk(or)24 b Fj(dkoes)p Fk(\).)k(When)d(you)g(ha)n(v)
o(e)g(completed)0 686 y(the)f(lab)g(you)g(will)f(hand)h(in)g(only)g
(one)g(\002le)f(\()p Fj(mm.c)p Fk(\))f(which)h(contains)j(your)f
(solution.)0 1016 y Fi(4)119 b(Ho)o(w)30 b(to)g(W)-9
b(ork)29 b(on)i(the)f(Lab)0 1262 y Fk(Y)-10 b(our)22
b(dynamic)h(storage)g(allocator)h(will)e(consist)h(of)f(the)g(follo)n
(wing)h(\002)n(v)o(e)e(functions,)k(which)d(are)g(declared)i(in)d
Fj(mm.h)e Fk(and)0 1375 y(de\002ned)24 b(in)g Fj(mm.c)p
Fk(.)218 1614 y Fj(int)162 b(mm_init\(void\);)218 1727
y(void)53 b(*mm_malloc\(size)o(_t)48 b(size\);)218 1840
y(void)53 b(*mm_realloc\(voi)o(d)48 b(*ptr,)k(size_t)g(size\);)218
1953 y(void)107 b(mm_free\(void)50 b(*ptr\);)218 2066
y(void)107 b(mm_heapcheck\(voi)o(d\))o(;)0 2306 y Fk(The)31
b Fj(mm-helper.c)25 b Fk(\002le)30 b(we)h(ha)n(v)o(e)g(gi)n(v)o(en)h
(you)g(contains)h(the)e(simple)h(b)n(ut)g(still)f(functionally)k
(correct)e(malloc)e(im-)0 2419 y(plementation)g(from)c(the)h(te)o
(xtbook.)43 b(Using)28 b(this)g(as)f(a)h(starting)h(point,)g(\002ll)e
(in)h(the)g(functions)i(in)d Fj(mm.c)e Fk(\(and)k(possibly)0
2531 y(de\002ne)24 b(other)g(pri)n(v)n(ate)h Fj(static)20
b Fk(functions\))26 b(so)e(that)g(the)o(y)g(obe)o(y)g(the)g(follo)n
(wing)h(semantics:)136 2771 y Fg(\017)46 b Fj(mm)p 342
2771 28 4 v 32 w(init:)32 b Fk(Before)c(calling)g Fj(mm)p
1338 2771 V 32 w(malloc)23 b Fk(or)k Fj(mm)p 1935 2771
V 32 w(free)p Fk(,)d(the)j(application)j(program)e(\(i.e.,)f(the)g
(trace-dri)n(v)o(en)227 2884 y(dri)n(v)o(er)34 b(program)g(that)g(you)g
(will)f(use)g(to)g(e)n(v)n(aluate)i(your)f(implementation\))i(calls)e
Fj(mm)p 3058 2884 V 32 w(init)d Fk(to)i(perform)h(an)o(y)227
2997 y(necessary)24 b(initializations,)h(such)d(as)f(allocating)j(the)d
(initial)i(heap)e(area.)29 b(The)20 b(return)j(v)n(alue)f(should)g(be)f
(-1)g(if)g(there)227 3110 y(w)o(as)i(a)h(problem)g(in)g(performing)h
(the)f(initialization,)j(0)d(otherwise.)136 3294 y Fg(\017)46
b Fj(mm)p 342 3294 V 32 w(malloc:)41 b Fk(The)31 b Fj(mm)p
1082 3294 V 32 w(malloc)d Fk(routine)33 b(returns)g(a)e(pointer)i(to)e
(an)h(allocated)h(block)g(payload)h(of)d(at)g(least)227
3406 y Fj(size)20 b Fk(bytes.)30 b(The)22 b(entire)i(allocated)h(block)
e(should)i(lie)d(within)h(the)g(heap)h(re)o(gion)f(and)g(should)h(not)f
(o)o(v)o(erlap)h(with)227 3519 y(an)o(y)g(other)g(allocated)i(chunk.)
227 3668 y(W)-7 b(e)32 b(will)h(be)g(comparing)i(your)f(implementation)
i(to)d(the)h(v)o(ersion)g(of)f Fj(malloc)d Fk(supplied)35
b(in)e(the)h(standard)h(C)227 3781 y(library)29 b(\()p
Fj(libc)p Fk(\).)39 b(Since)28 b(the)g Fj(libc)c Fk(malloc)29
b(al)o(w)o(ays)f(returns)h(payload)h(pointers)f(that)f(are)g(aligned)h
(to)f(8)f(bytes,)227 3893 y(your)e(malloc)f(implementation)i(should)f
(do)f(lik)o(e)n(wise)h(and)f(al)o(w)o(ays)g(return)h(8-byte)g(aligned)g
(pointers.)136 4077 y Fg(\017)46 b Fj(mm)p 342 4077 V
32 w(realloc:)31 b Fk(The)c Fj(mm)p 1123 4077 V 32 w(realloc)22
b Fk(routine)29 b(returns)g(a)d(pointer)j(to)d(an)h(allocated)i(re)o
(gion)f(of)f(at)g(least)h Fj(size)227 4190 y Fk(bytes)d(with)e(the)h
(follo)n(wing)h(constraints.)336 4374 y Fh(\226)46 b
Fk(if)24 b Fj(ptr)d Fk(is)i(NULL,)e(the)j(call)g(is)f(equi)n(v)n(alent)
j(to)e Fj(mm)p 2040 4374 V 31 w(malloc\(size\))p Fk(;)336
4516 y Fh(\226)46 b Fk(if)24 b Fj(size)c Fk(is)k(equal)g(to)g(zero,)g
(the)g(call)g(is)f(equi)n(v)n(alent)j(to)d Fj(mm)p 2321
4516 V 32 w(free\(ptr\))p Fk(;)336 4658 y Fh(\226)46
b Fk(if)18 b Fj(ptr)e Fk(is)i(not)g(NULL,)e(it)i(must)g(ha)n(v)o(e)g
(been)h(returned)h(by)f(an)f(earlier)h(call)g(to)f Fj(mm)p
2944 4658 V 32 w(malloc)c Fk(or)k Fj(mm)p 3523 4658 V
32 w(realloc)p Fk(.)427 4771 y(The)32 b(call)h(to)g Fj(mm)p
981 4771 V 31 w(realloc)c Fk(changes)34 b(the)f(size)g(of)g(the)f
(memory)h(block)h(pointed)g(to)f(by)f Fj(ptr)f Fk(\(the)i
Ff(old)427 4884 y(bloc)n(k)p Fk(\))d(to)e Fj(size)e Fk(bytes)k(and)e
(returns)i(the)f(address)h(of)e(the)h(ne)n(w)f(block.)44
b(Notice)29 b(that)g(the)f(address)i(of)f(the)427 4997
y(ne)n(w)20 b(block)i(might)f(be)g(the)g(same)g(as)g(the)g(old)g
(block,)h(or)f(it)f(might)i(be)e(dif)n(ferent,)j(depending)h(on)d(your)
g(imple-)427 5110 y(mentation,)27 b(the)e(amount)g(of)g(internal)h
(fragmentation)i(in)d(the)f(old)h(block,)h(and)f(the)g(size)g(of)g(the)
g Fj(realloc)427 5222 y Fk(request.)427 5350 y(The)c(contents)j(of)d
(the)h(ne)n(w)f(block)i(are)e(the)h(same)g(as)f(those)i(of)e(the)h(old)
g Fj(ptr)d Fk(block,)k(up)f(to)f(the)h(minimum)f(of)427
5463 y(the)26 b(old)g(and)g(ne)n(w)f(sizes.)36 b(Ev)o(erything)27
b(else)f(is)g(uninitialized.)38 b(F)o(or)25 b(e)o(xample,)h(if)g(the)g
(old)f(block)i(is)f(8)f(bytes)1924 5712 y(2)p eop
%%Page: 3 3
3 2 bop 427 573 a Fk(and)27 b(the)f(ne)n(w)f(block)j(is)d(12)h(bytes,)i
(then)f(the)f(\002rst)g(8)f(bytes)i(of)f(the)g(ne)n(w)g(block)h(are)f
(identical)i(to)e(the)h(\002rst)e(8)427 686 y(bytes)g(of)e(the)h(old)g
(block)h(and)f(the)g(last)g(4)f(bytes)h(are)g(uninitialized.)33
b(Similarly)-6 b(,)24 b(if)f(the)h(old)g(block)g(is)g(8)f(bytes)427
799 y(and)h(the)h(ne)n(w)e(block)i(is)e(4)h(bytes,)g(then)h(the)f
(contents)i(of)d(the)h(ne)n(w)f(block)i(are)f(identical)i(to)e(the)g
(\002rst)f(4)h(bytes)427 912 y(of)g(the)g(old)f(block.)136
1099 y Fg(\017)46 b Fj(mm)p 342 1099 28 4 v 32 w(free:)36
b Fk(The)29 b Fj(mm)p 965 1099 V 31 w(free)e Fk(routine)j(frees)g(the)f
(block)g(pointed)i(to)e(by)g Fj(ptr)p Fk(.)42 b(It)28
b(returns)i(nothing.)47 b(This)28 b(rou-)227 1212 y(tine)35
b(is)f(only)h(guaranteed)i(to)d(w)o(ork)g(when)g(the)h(passed)g
(pointer)h(\()p Fj(ptr)p Fk(\))d(w)o(as)g(returned)k(by)d(an)g(earlier)
h(call)g(to)227 1325 y Fj(mm)p 342 1325 V 32 w(malloc)20
b Fk(or)k Fj(mm)p 933 1325 V 31 w(remalloc)19 b Fk(and)24
b(has)g(not)g(yet)g(been)g(freed.)136 1513 y Fg(\017)46
b Fj(mm)p 342 1513 V 32 w(heapcheck:)31 b Fk(The)c Fj(mm)p
1233 1513 V 32 w(heapcheck)22 b Fk(function)30 b(scans)e(the)g(heap)g
(and)f(outputs)j(the)d(acti)n(v)o(e)h(blocks,)i(i.e.)227
1626 y(the)24 b(blocks)h(that)f(ha)n(v)o(e)g(been)h(allocated)h(and)e
(ha)n(v)o(en')n(t)h(been)g(freed)f(yet.)336 1838 y Fh(\226)46
b Fk(Y)-10 b(our)24 b(are)g(pro)o(vided)h(with)e(a)h(function)h(called)
427 1968 y Fj(print)p 707 1968 V 31 w(block\(int)50 b(request)p
1668 1968 V 30 w(id,)j(int)g(payload\))427 2097 y Fk(that)22
b(the)g(heapcheck)o(er)j(should)e(call)f(for)g(each)g(acti)n(v)o(e)g
(block.)29 b(This)22 b(is)f(a)g(simple)h(function)i(that)e(just)g
(outputs)427 2227 y Fj($BLOCK)52 b(request)p 1199 2227
V 30 w(id)h(payload)427 2356 y Fk(which)24 b(is)g(recognized)i(by)e
(our)g(parser)-5 b(.)336 2502 y Fh(\226)46 b Fk(Each)33
b(call)g(to)f Fj(mm)p 1021 2502 V 32 w(malloc)d Fk(is)k(sequentially)j
(assigned)e(an)f(id,)i(starting)f(from)f Fe(0)p Fk(.)55
b(The)32 b Fj(request)p 3760 2502 V 30 w(id)427 2615
y Fk(\002eld)i(abo)o(v)o(e)g(corresponds)k(to)33 b(the)i(id)e(of)h(the)
g Fj(mm)p 2061 2615 V 32 w(malloc)c Fk(call)35 b(that)f(allocated)i
(the)f(acti)n(v)o(e)f(block.)61 b(In)427 2728 y(order)25
b(to)e(implement)i(this,)e(you)h(will)f(k)o(eep)i(a)e
Fe(32)g Fk(bit)h(\()p Fe(4)f Fk(byte/inte)o(ger\))k(counter)l(,)e(that)
f(is)f(initialized)k(to)c Fe(0)g Fk(in)427 2841 y Fj(mm)p
542 2841 V 32 w(init)c Fk(and)k(incremented)h(on)e(a)f(call)h(to)g
Fj(mm)p 1963 2841 V 32 w(malloc)p Fk(.)j(Also,)c(you)i(w)o(ould)f(need)
h(to)f(store)g(the)g(v)n(alue)h(of)427 2954 y(this)h(counter)i(in)d
(the)h(allocated)i(block.)427 3083 y(Ideally)-6 b(,)36
b(a)d(block)g(allocated)i(using)f Fj(mm)p 1740 3083 V
32 w(realloc)28 b Fk(w)o(ould)33 b(k)o(eep)h(the)e(same)h(id)f(as)h
(the)f(original)j(block.)427 3196 y(Ho)n(we)n(v)o(er)l(,)23
b(you)h(will)g(not)g(be)f(penalized)j(for)e(not)g(enforcing)i(this)e
(condition.)336 3342 y Fh(\226)46 b Fk(The)23 b Fj(payload)c
Fk(\002eld)k(refers)h(to)f(the)h(amount)g(of)f(memory)g(actually)i
(allocated)g(by)f(malloc.)29 b(This)23 b(must)g(be)427
3455 y(equal)i(to)e(or)h(lar)n(ger)h(than)f(the)g(amount)g(originally)j
(requested.)336 3601 y Fh(\226)46 b Fk(The)18 b Fj(mm)p
701 3601 V 32 w(heapcheck)13 b Fk(may)18 b(produce)i(additional)h
(output)e(\(other)h(than)f(the)f(blocks)i(output)f(with)f
Fj(print)p 3850 3601 V 31 w(block)p Fk(\))427 3714 y(that)25
b(the)g(student)i(might)e(use)g(for)f(their)i(o)n(wn)e
(understanding/deb)o(ug)q(gin)q(g.)37 b(This)25 b(output)h(is)e
(ignored)j(while)427 3827 y(e)n(v)n(aluating)i(correctness.)40
b(Ho)n(we)n(v)o(er)l(,)26 b(an)o(y)h(additional)i(functionality)h(in)c
(the)h Fj(mm)p 3050 3827 V 31 w(heapchecker)21 b Fk(func-)427
3940 y(tion)j(might)g(be)g(a)o(w)o(arded)g(with)g(style)g(points.)336
4086 y Fh(\226)46 b Fk(Here)24 b(is)f(an)h(e)o(xample.)29
b(Consider)c(the)f(follo)n(wing)h(sequence)h(of)d(calls)i(to)e(your)h
(malloc)h(package:)427 4216 y Fj(mm)p 542 4216 V 32 w(init\(\))427
4329 y(p1)54 b(=)g(mm)p 815 4329 V 32 w(malloc\(10\))427
4442 y(p2)g(=)g(mm)p 815 4442 V 32 w(malloc\(15\))427
4555 y(p3)g(=)g(mm)p 815 4555 V 32 w(malloc\(3\))427
4667 y(mm)p 542 4667 V 32 w(free\(p2\))427 4780 y(p4)g(=)g(mm)p
815 4780 V 32 w(malloc\(1\))427 4893 y(mm)p 542 4893
V 32 w(heapcheck\(\))427 5023 y Fk(The)23 b(follo)n(wing)i(is)f(a)f(v)n
(alid)h(output)h(\(not)f(unique\),)i(for)d(the)h Fj(mm)p
2439 5023 V 32 w(heapcheck)19 b Fk(fucntion.)427 5215
y Fj(Skipping)51 b(over)i(prologue.)427 5328 y(Found)g(free)f(block.)
427 5440 y(Found)h(allocated)d(block.)1924 5712 y Fk(3)p
eop
%%Page: 4 4
4 3 bop 427 573 a Fj($BLOCK)52 b(0)i(10)427 686 y(Found)f(allocated)d
(block.)427 799 y($BLOCK)i(3)i(1)427 912 y(Found)f(allocated)d(block.)
427 1024 y($BLOCK)i(2)i(3)427 1137 y(Done.)0 1376 y Fk(These)30
b(semantics)h(match)f(the)f(the)h(semantics)h(of)f(the)f(corresponding)
34 b Fj(libc)27 b(malloc)f Fk(and)k Fj(free)d Fk(routines.)48
b(T)-7 b(ype)0 1488 y Fj(man)53 b(malloc)20 b Fk(in)k(the)f(shell)i
(for)f(complete)h(documentation.)0 1818 y Fi(5)119 b(Heap)31
b(Consistency)e(Check)o(er)0 2064 y Fk(Dynamic)k(memory)f(allocators)j
(are)e(notoriously)j(trick)o(y)d(beasts)h(to)e(program)h(correctly)i
(and)e(ef)n(\002ciently)-6 b(.)57 b(The)o(y)32 b(are)0
2177 y(dif)n(\002cult)i(to)e(program)i(correctly)h(because)g(the)o(y)e
(in)l(v)n(olv)o(e)i(a)d(lot)h(of)g(untyped)i(pointer)f(manipulation.)59
b(Y)-10 b(ou)33 b(will)f(\002nd)0 2290 y(it)37 b(v)o(ery)g(helpful)i
(to)e(add)h(additional)i(functionality)h(to)c(your)h
Fj(mm)p 2178 2290 28 4 v 32 w(heapcheck)32 b Fk(routine)39
b(that)f(scans)g(the)g(heap)g(for)0 2403 y(consistenc)o(y)-6
b(.)0 2555 y(Some)23 b(e)o(xamples)i(of)e(what)g(a)h(heap)g(check)o(er)
h(might)f(check)h(are:)136 2770 y Fg(\017)46 b Fk(Is)24
b(e)n(v)o(ery)g(block)g(in)g(the)g(free)g(list)g(mark)o(ed)g(as)f
(free?)136 2953 y Fg(\017)46 b Fk(Are)23 b(there)i(an)o(y)e(contiguous)
k(free)d(blocks)h(that)f(someho)n(w)g(escaped)i(coalescing?)136
3137 y Fg(\017)46 b Fk(Is)24 b(e)n(v)o(ery)g(free)g(block)g(actually)i
(in)d(the)h(free)g(list?)136 3320 y Fg(\017)46 b Fk(Do)23
b(the)h(pointers)i(in)d(the)h(free)g(list)g(point)g(to)g(v)n(alid)g
(free)g(blocks?)136 3503 y Fg(\017)46 b Fk(Do)23 b(an)o(y)h(allocated)i
(blocks)f(o)o(v)o(erlap?)136 3686 y Fg(\017)46 b Fk(Do)23
b(the)h(pointers)i(in)d(a)g(heap)h(block)h(point)g(to)e(v)n(alid)i
(heap)f(addresses?)136 3869 y Fg(\017)46 b Fk(Are)23
b(all)h(the)g(doubly-link)o(ed)k(lists)c(v)n(alid)g(?)0
4084 y(Y)-10 b(ou)25 b(are)g(not)h(limited)g(to)f(the)h(listed)g
(suggestions)j(nor)d(are)f(you)h(required)h(to)e(check)i(all)e(of)g
(them.)34 b(Style)25 b(points)i(will)e(be)0 4197 y(a)o(w)o(arded)f(for)
g(a)f(rob)n(ust)i(heapcheck)o(er)-5 b(.)0 4527 y Fi(6)119
b(Support)32 b(Routines)0 4773 y Fk(The)26 b(memlib)l(.c)h(package)h
(simulates)g(the)f(memory)f(system)h(for)g(your)g(dynamic)h(memory)e
(allocator)-5 b(.)40 b(Y)-10 b(ou)26 b(can)h(in)l(v)n(ok)o(e)0
4886 y(the)d(follo)n(wing)h(functions)h(in)d Fj(memlib.c)p
Fk(:)136 5124 y Fg(\017)46 b Fj(void)53 b(*mem)p 725
5124 V 31 w(sbrk\(int)e(incr\))p Fk(:)g(Expands)37 b(the)g(heap)g(by)f
Fj(incr)d Fk(bytes,)40 b(where)d Fj(incr)c Fk(is)j(a)f(positi)n(v)o(e)
227 5237 y(non-zero)29 b(inte)o(ger)e(and)g(returns)h(a)d(generic)j
(pointer)g(to)e(the)g(\002rst)g(byte)h(of)f(the)h(ne)n(wly)f(allocated)
i(heap)f(area.)37 b(The)227 5350 y(semantics)d(are)e(identical)i(to)e
(the)g(Unix)f Fj(sbrk)f Fk(function,)35 b(e)o(xcept)e(that)f
Fj(mem)p 2771 5350 V 32 w(sbrk)d Fk(accepts)34 b(only)e(a)f(positi)n(v)
o(e)227 5463 y(non-zero)26 b(inte)o(ger)f(ar)n(gument.)1924
5712 y(4)p eop
%%Page: 5 5
5 4 bop 136 573 a Fg(\017)46 b Fj(void)53 b(*mem)p 725
573 28 4 v 31 w(heap)p 976 573 V 31 w(lo\(void\))p Fk(:)25
b(Returns)f(a)f(generic)j(pointer)f(to)e(the)h(\002rst)f(byte)i(in)e
(the)h(heap.)136 760 y Fg(\017)46 b Fj(void)53 b(*mem)p
725 760 V 31 w(heap)p 976 760 V 31 w(hi\(void\))p Fk(:)25
b(Returns)f(a)f(generic)j(pointer)f(to)e(the)h(last)g(byte)g(in)g(the)g
(heap.)136 948 y Fg(\017)46 b Fj(size)p 452 948 V 31
w(t)54 b(mem)p 757 948 V 32 w(heapsize\(void\))o Fk(:)23
b(Returns)h(the)g(current)h(size)f(of)g(the)g(heap)g(in)f(bytes.)136
1136 y Fg(\017)46 b Fj(size)p 452 1136 V 31 w(t)54 b(mem)p
757 1136 V 32 w(pagesize\(void\))o Fk(:)22 b(Returns)i(the)f(system')-5
b(s)25 b(page)e(size)h(in)e(bytes)i(\(4K)f(on)g(Linux)g(systems\).)0
1468 y Fi(7)119 b(The)31 b(T)-9 b(race-dri)o(v)o(en)30
b(Dri)o(v)o(er)g(Pr)n(ogram)0 1714 y Fk(The)23 b(dri)n(v)o(er)h
(program)g Fj(mdriver.c)19 b Fk(in)k(the)g Fj(malloclab-hando)o(ut.)o
(ta)o(r)16 b Fk(distrib)n(ution)27 b(tests)d(your)g Fj(mm.c)d
Fk(pack-)0 1827 y(age)31 b(for)g(correctness,)k(space)c(utilization,)k
(and)c(throughput.)53 b(The)30 b(dri)n(v)o(er)h(program)h(is)e
(controlled)j(by)e(a)f(set)h(of)f Ff(tr)o(ace)0 1939
y(\002les)c Fk(present)h(in)f(the)g Fj(/afs/cs/academ)o(ic/)o(cl)o(as)o
(s/)o(15)o(213)o(-s)o(03)o(/l)o(ab)o(s/L)o(6/)o(tr)o(ac)o(es)o(/)19
b Fk(directory)-6 b(.)37 b(Each)0 2052 y(trace)30 b(\002le)e(contains)j
(a)e(sequence)i(of)e(allocate,)j(realloc,)g(free)d(and)h(heapcheck)i
(directions)g(that)d(instruct)i(the)e(dri)n(v)o(er)h(to)0
2165 y(call)h(your)h Fj(mm)p 473 2165 V 32 w(malloc)p
Fk(,)d Fj(mm)p 997 2165 V 32 w(realloc)p Fk(,)g Fj(mm)p
1576 2165 V 31 w(free)p Fk(,)h(and)i Fj(mm)p 2152 2165
V 32 w(heapcheck)26 b Fk(routines)33 b(in)e(some)g(sequence.)53
b(The)0 2278 y(dri)n(v)o(er)24 b(and)g(the)g(trace)g(\002les)g(are)f
(the)h(same)g(ones)g(we)f(will)g(use)h(when)g(we)e(grade)j(your)f
(handin)h Fj(mm.c)c Fk(\002le.)0 2430 y(The)i(dri)n(v)o(er)h
Fj(mdriver.c)19 b Fk(accepts)25 b(the)f(follo)n(wing)h(command)f(line)g
(ar)n(guments:)136 2657 y Fg(\017)46 b Fj(-t)54 b(<tracedir>)p
Fk(:)40 b(Look)31 b(for)h(the)g(def)o(ault)h(trace)f(\002les)f(in)h
(directory)i Fj(tracedir)27 b Fk(instead)33 b(of)e(the)h(def)o(ault)227
2770 y(directory)26 b(de\002ned)f(in)e Fj(config.h)p
Fk(.)136 2958 y Fg(\017)46 b Fj(-f)54 b(<tracefile>)p
Fk(:)29 b(Use)c(one)i(particular)i Fj(tracefile)21 b
Fk(for)26 b(testing)i(instead)g(of)e(the)h(def)o(ault)g(set)g(of)f
(trace-)227 3070 y(\002les.)136 3258 y Fg(\017)46 b Fj(-h)p
Fk(:)28 b(Print)23 b(a)g(summary)i(of)e(the)h(command)g(line)g(ar)n
(guments.)136 3446 y Fg(\017)46 b Fj(-l)p Fk(:)37 b(Run)27
b(and)i(measure)g Fj(libc)c Fk(malloc)k(in)e(addition)j(to)e(the)h
(student')-5 b(s)30 b(malloc)e(package.)44 b(T)-7 b(o)27
b(see)h(the)h(results,)227 3559 y(use)24 b(the)g Fj(-v)e
Fk(option.)136 3746 y Fg(\017)46 b Fj(-v)p Fk(:)28 b(V)-10
b(erbose)24 b(output.)31 b(Print)23 b(a)g(performance)j(breakdo)n(wn)g
(for)d(each)i(trace\002le)f(in)g(a)f(compact)i(table.)136
3934 y Fg(\017)46 b Fj(-V)p Fk(:)32 b(More)h(v)o(erbose)i(output.)58
b(Prints)34 b(additional)h(diagnostic)h(information)g(as)d(each)g
(trace)h(\002le)f(is)g(processed.)227 4047 y(Useful)24
b(during)h(deb)n(ugging)i(for)d(determining)i(which)e(trace)g(\002le)f
(is)h(causing)h(your)f(malloc)h(package)g(to)f(f)o(ail.)136
4234 y Fg(\017)46 b Fj(-d)p Fk(:)38 b(Ev)o(erytime)29
b Fj(mm)p 920 4234 V 32 w(heapcheck)23 b Fk(is)29 b(called,)i(dump)d
(the)h(output)h(to)f Fj(stdout)p Fk(.)40 b(The)28 b(def)o(ault)i(is)f
(to)f(print)i(the)227 4347 y(output)25 b(of)f Fj(mm)p
696 4347 V 32 w(heapcheck)18 b Fk(only)25 b(if)e(an)g(error)i(is)e
(detected.)1924 5712 y(5)p eop
%%Page: 6 6
6 5 bop 0 544 a Fk(The)23 b(trace)h(\002le)f(format)h(is)g(as)f(follo)n
(ws:)0 656 y Fj(20000)52 b Fd(Suggested)f(heap)h(size)0
769 y Fj(6)i Fd(Number)e(of)i(ids)0 882 y Fj(12)g Fd(Number)d(of)j
(operations)0 995 y Fj(1)g Fd(Weight)e(of)i(this)e(trace)h(file)f
(\(for)h(grading\))0 1108 y Fj(a)h(0)g(2040)f Fd(An)h(operation:)104
b(<type>)52 b(<id>)h(<size>)0 1221 y Fj(a)h(1)g(2040)0
1334 y(f)g(1)0 1447 y(a)g(2)g(48)0 1560 y(a)g(3)g(4072)0
1673 y(f)g(3)0 1786 y(a)g(4)g(4072)0 1898 y(f)g(0)0 2011
y(f)g(2)0 2124 y(a)g(5)g(4072)0 2237 y(f)g(4)0 2350 y(f)g(5)0
2736 y Fi(8)119 b(Pr)n(ogramming)29 b(Rules)136 2980
y Fg(\017)46 b Fk(Y)-10 b(ou)24 b(should)h(not)f(change)h(an)o(y)e(of)h
(the)g(interf)o(aces)i(in)d Fj(mm.c)p Fk(.)136 3168 y
Fg(\017)46 b Fk(Y)-10 b(ou)26 b(should)i(not)e(in)l(v)n(ok)o(e)j(an)o
(y)d(memory-management)j(related)f(library)g(calls)f(or)f(system)h
(calls.)37 b(This)26 b(e)o(xcludes)227 3281 y(the)33
b(use)f(of)g Fj(malloc)p Fk(,)e Fj(realloc)p Fk(,)g Fj(calloc)p
Fk(,)h Fj(free)p Fk(,)g Fj(realloc)p Fk(,)f Fj(sbrk)p
Fk(,)h Fj(brk)f Fk(or)i(an)o(y)g(v)n(ariants)i(of)e(these)227
3394 y(calls)25 b(in)e(your)h(code.)136 3581 y Fg(\017)46
b Fk(Y)-10 b(ou)21 b(are)g(not)g(allo)n(wed)g(to)g(de\002ne)g(an)o(y)f
(global)i(or)f Fj(static)c Fk(compound)23 b(data)e(structures)i(such)f
(as)e(arrays,)j(structs,)227 3694 y(trees,)h(or)e(lists)i(in)f(your)g
Fj(mm.c)d Fk(program.)30 b(Ho)n(we)n(v)o(er)l(,)22 b(to)h(simplify)h
(the)f(programming)i(task,)e(you)h Ff(ar)m(e)f Fk(allo)n(wed)g(to)227
3807 y(declare)j(global)f(scalar)f(v)n(ariables)i(such)f(as)e(inte)o
(gers,)i(\003oats,)f(and)g(pointers)h(in)f Fj(mm.c)p
Fk(.)i(Excessi)n(v)o(e)f(use)f(of)f(global)227 3920 y(v)n(ariables)j
(will)d(result)i(in)e(lost)h(style)h(points.)136 4108
y Fg(\017)46 b Fk(F)o(or)20 b(consistenc)o(y)j(with)d(the)h
Fj(libc)d(malloc)f Fk(package,)23 b(which)d(returns)i(blocks)g(aligned)
h(on)d(8-byte)i(boundaries,)227 4221 y(your)36 b(allocator)i(must)d(al)
o(w)o(ays)h(return)g(pointers)h(that)f(are)f(aligned)i(to)e(8-byte)h
(boundaries.)67 b(The)35 b(dri)n(v)o(er)g(will)227 4334
y(enforce)26 b(this)e(requirement)i(for)d(you.)0 4665
y Fi(9)119 b(Ev)o(aluation)0 4912 y Fk(Y)-10 b(ou)31
b(will)h(recei)n(v)o(e)g Fh(zer)n(o)h(points)e Fk(if)h(you)g(break)g
(an)o(y)g(of)g(the)g(rules)g(or)g(your)g(code)h(is)e(b)n(uggy)i(and)f
(crashes)i(the)e(dri)n(v)o(er)-5 b(.)0 5024 y(Otherwise,)24
b(your)g(grade)h(will)e(be)h(calculated)i(as)e(follo)n(ws:)136
5276 y Fg(\017)46 b Ff(Corr)m(ectness)38 b(\(20)d(points\).)65
b Fk(Y)-10 b(ou)35 b(will)g(recei)n(v)o(e)h(full)g(points)h(if)d(your)i
(solution)i(passes)e(the)g(correctness)i(tests)227 5389
y(performed)26 b(by)d(the)h(dri)n(v)o(er)g(program.)30
b(Y)-10 b(ou)23 b(will)h(recei)n(v)o(e)g(partial)h(credit)g(for)f(each)
g(correct)h(trace.)1924 5712 y(6)p eop
%%Page: 7 7
7 6 bop 136 573 a Fg(\017)46 b Ff(P)-7 b(erformance)25
b(\(40)f(points\).)31 b Fk(T)-7 b(w)o(o)22 b(performance)k(metrics)e
(will)g(be)f(used)h(to)g(e)n(v)n(aluate)h(your)f(solution:)336
785 y Fh(\226)46 b Ff(Space)29 b(utilization)p Fk(:)39
b(The)27 b(peak)g(ratio)h(between)h(the)e(aggre)o(gate)i(amount)f(of)f
(memory)g(used)h(by)f(the)g(dri)n(v)o(er)427 898 y(\(i.e.,)j(allocated)
i(via)d Fj(mm)p 1232 898 28 4 v 32 w(malloc)d Fk(b)n(ut)j(not)h(yet)f
(freed)i(via)e Fj(mm)p 2511 898 V 32 w(free)p Fk(\))e(and)i(the)h(size)
g(of)f(the)g(heap)h(used)427 1011 y(by)i(your)h(allocator)-5
b(.)55 b(The)31 b(optimal)i(ratio)g(equals)g(to)e(1.)53
b(Y)-10 b(ou)32 b(should)h(\002nd)e(good)i(policies)h(to)d(minimize)427
1124 y(fragmentation)c(in)c(order)i(to)e(mak)o(e)h(this)g(ratio)h(as)e
(close)i(as)e(possible)j(to)d(the)h(optimal.)336 1270
y Fh(\226)46 b Ff(Thr)l(oughput)p Fk(:)32 b(The)23 b(a)n(v)o(erage)i
(number)g(of)e(operations)k(completed)e(per)f(second.)227
1482 y(The)19 b(dri)n(v)o(er)g(program)i(summarizes)f(the)f
(performance)j(of)d(your)g(allocator)j(by)d(computing)i(a)d
Ff(performance)k(inde)n(x)p Fk(,)227 1595 y Fc(P)13 b
Fk(,)23 b(which)h(is)f(a)g(weighted)i(sum)e(of)h(the)g(space)g
(utilization)j(and)d(throughput)1388 1838 y Fc(P)39 b
Fe(=)25 b Fc(w)r(U)30 b Fe(+)20 b(\(1)h Fg(\000)f Fc(w)r
Fe(\))15 b(min)2308 1719 y Fb(\022)2369 1838 y Fe(1)p
Fc(;)2530 1776 y(T)p 2465 1817 197 4 v 2465 1900 a(T)2518
1914 y Fa(max)2672 1719 y Fb(\023)227 2076 y Fk(where)k
Fc(U)27 b Fk(is)18 b(your)h(space)h(utilization,)i Fc(T)30
b Fk(is)18 b(your)h(throughput,)j(and)d Fc(T)2435 2090
y Fa(max)2597 2076 y Fk(is)f(the)g(minimum)g(throughput)k(required)227
2189 y(to)j(get)g(full)h(credit)g(\(900)f(K)m(ops/s\).)34
b(The)24 b(performance)k(inde)o(x)e(f)o(a)n(v)n(ors)g(space)g
(utilization)i(o)o(v)o(er)d(throughput,)j(with)227 2302
y(a)23 b(def)o(ault)j(of)d Fc(w)28 b Fe(=)d(0)p Fc(:)p
Fe(6)p Fk(.)227 2452 y(Observing)c(that)e(both)g(memory)g(and)g(CPU)d
(c)o(ycles)k(are)f(e)o(xpensi)n(v)o(e)h(system)f(resources,)j(we)c
(adopt)h(this)g(formula)h(to)227 2565 y(encourage)i(balanced)f
(optimization)h(of)d(both)g(memory)g(utilization)j(and)e(throughput.)30
b(Ideally)-6 b(,)21 b(the)e(performance)227 2678 y(inde)o(x)29
b(will)e(reach)i Fc(P)46 b Fe(=)33 b Fc(w)26 b Fe(+)d(\(1)h
Fg(\000)f Fc(w)r Fe(\))34 b(=)e(1)c Fk(or)f Fe(100\045)p
Fk(.)42 b(Since)28 b(each)g(metric)h(will)e(contrib)n(ute)k(at)c(most)h
Fc(w)h Fk(and)227 2791 y Fe(1)c Fg(\000)f Fc(w)31 b Fk(to)e(the)g
(performance)j(inde)o(x,)f(respecti)n(v)o(ely)-6 b(,)33
b(you)d(should)g(not)g(go)f(to)g(e)o(xtremes)h(to)f(optimize)h(either)h
(the)227 2904 y(memory)k(utilization)i(or)e(the)g(throughput)i(only)-6
b(.)63 b(T)-7 b(o)33 b(recei)n(v)o(e)j(a)e(good)i(score,)i(you)d(must)f
(achie)n(v)o(e)i(a)e(balance)227 3017 y(between)i(utilization)h(and)d
(throughput.)64 b(Since)35 b(it')-5 b(s)35 b(impossible)h(to)e(achie)n
(v)o(e)i(a)d(space)j(utilization)h Fc(U)43 b Fk(of)34
b(1.0,)227 3130 y(before)26 b(calculating)i(the)c(\002nal)h(grades)g
(we)f(will)g(slightly)j(bias)e Fc(U)33 b Fk(to)25 b(ensure)h(that)f
(the)f(top)h(solutions)i(recei)n(v)o(e)e(full)227 3242
y(credit.)38 b(This)27 b(biasing)h(is)e(not)h(performed)h(by)e(the)h
(dri)n(v)o(er)g(program,)h(b)n(ut)e(you)h(can)g(assume)g(that)g(a)f
(utilization)j(of)227 3355 y(.95)24 b(or)f(higher)i(will)e(recei)n(v)o
(e)i(full)f(credit.)136 3543 y Fg(\017)46 b Ff(Style)25
b(\(5)e(points\).)336 3730 y Fh(\226)46 b Fk(Y)-10 b(our)24
b(code)g(should)h(be)f(decomposed)i(into)e(functions)i(and)e(use)g(as)g
(fe)n(w)e(global)j(v)n(ariables)h(as)e(possible.)336
3876 y Fh(\226)46 b Fk(Y)-10 b(our)33 b(code)g(should)h(be)o(gin)f
(with)f(a)g(header)i(comment)f(that)g(describes)i(the)d(structure)j(of)
d(your)i(free)e(and)427 3989 y(allocated)f(blocks,)g(the)e(or)n
(ganization)j(of)d(the)f(free)h(list,)h(and)f(ho)n(w)f(your)i
(allocator)h(manipulates)g(the)d(free)427 4102 y(list.)46
b(Each)29 b(function)j(should)f(be)e(preceded)i(by)f(a)e(header)j
(comment)f(that)g(describes)h(what)e(the)h(function)427
4215 y(does.)336 4361 y Fh(\226)46 b Fk(Each)24 b(subroutine)i(should)f
(ha)n(v)o(e)g(a)e(header)i(comment)f(that)g(describes)i(what)d(it)h
(does)g(and)g(ho)n(w)f(it)g(does)i(it.)336 4507 y Fh(\226)46
b Fk(Y)-10 b(our)24 b(heap)g(consistenc)o(y)j(check)o(er)e
Fj(mm)p 1686 4507 28 4 v 32 w(heapcheck)19 b Fk(should)25
b(be)e(thorough)j(and)e(well-documented.)0 4839 y Fi(10)119
b(Handin)31 b(Instructions)0 5085 y Fk(Y)-10 b(ou)31
b(will)h(handin)h(your)g Fj(mm.c)c Fk(\002le)i(using)i(the)f(same)g
(sort)g(of)g(web)f(interf)o(ace)j(used)f(in)f(L4.)52
b(Y)-10 b(ou)32 b(can)g(re)o(gister)h(your)0 5198 y(group,)25
b(submit)f(your)g(solution)i(for)e(testing,)h(and)f(handin)h(your)f
(solution.)0 5350 y(Y)-10 b(ou)27 b(may)g(submit)h(your)g(solution)h
(for)e(testing)i(as)e(man)o(y)g(times)g(as)g(you)h(wish)f(up)g(until)h
(the)g(due)f(date.)41 b(The)26 b(web)h(page)0 5463 y(will)c(list)h
(your)g(best)h(scoring)g(submission.)1924 5712 y(7)p
eop
%%Page: 8 8
8 7 bop 0 573 a Fk(When)30 b(you)g(are)f(satis\002ed)i(with)e(your)h
(solution)i(you)e(can)f(of)n(\002cially)i(hand)f(it)f(in.)47
b(Only)29 b(the)h(last)f(v)o(ersion)i(you)f(handin)0
686 y(will)23 b(be)h(graded.)0 838 y(When)k(testing)h(your)f(\002les)g
(locally)-6 b(,)30 b(mak)o(e)d(sure)i(to)e(use)h(one)g(of)f(the)h
(\002sh)f(machines.)42 b(This)28 b(will)f(insure)i(that)f(the)g(grade)0
951 y(you)c(get)g(from)f Fj(mdriver)d Fk(is)j(representati)n(v)o(e)k
(of)d(the)g(grade)g(you)g(will)f(recei)n(v)o(e)i(when)f(you)g(submit)g
(your)g(solution.)0 1282 y Fi(11)119 b(Hints)136 1527
y Fg(\017)46 b Ff(Use)25 b(the)g Fj(mdriver)c(-f)j Ff(option.)35
b Fk(During)26 b(initial)g(de)n(v)o(elopment,)i(using)e(tin)o(y)f
(trace)h(\002les)f(will)g(simplify)h(deb)n(ug-)227 1640
y(ging)d(and)f(testing.)29 b(W)-7 b(e)21 b(ha)n(v)o(e)h(included)i(tw)o
(o)d(such)i(trace)f(\002les)g(\()p Fj(short1,2-bal.r)o(ep)p
Fk(\))15 b(that)22 b(you)g(can)g(use)g(for)227 1753 y(initial)j(deb)n
(ugging.)136 1940 y Fg(\017)46 b Ff(Use)31 b(the)g Fj(mdriver)c(-v)j
Ff(and)h Fj(-V)f Ff(options.)53 b Fk(The)30 b Fj(-v)g
Fk(option)i(will)f(gi)n(v)o(e)g(you)h(a)e(detailed)j(summary)f(for)f
(each)227 2053 y(trace)25 b(\002le.)j(The)23 b Fj(-V)f
Fk(will)h(also)h(indicate)i(when)d(each)h(trace)h(\002le)e(is)g(read,)h
(which)g(will)f(help)h(you)g(isolate)i(errors.)136 2241
y Fg(\017)46 b Ff(Compile)34 b(with)e Fj(gcc)54 b(-g)31
b Ff(and)i(use)h(a)e(deb)n(ug)o(g)o(er)-10 b(.)60 b Fk(A)32
b(deb)n(ugger)k(will)c(help)i(you)g(isolate)g(and)g(identify)h(out)e
(of)227 2354 y(bounds)26 b(memory)d(references.)136 2541
y Fg(\017)46 b Ff(Under)o(stand)37 b(e)o(very)e(line)f(of)g(the)h
(malloc)g(implementation)i(in)d(the)g(te)n(xtbook.)63
b Fk(The)34 b(te)o(xtbook)i(has)e(a)g(detailed)227 2654
y(e)o(xample)c(of)e(a)g(simple)h(allocator)i(based)f(on)e(an)h
(implicit)g(free)g(list.)44 b(Use)28 b(this)h(is)f(a)g(point)i(of)e
(departure.)46 b(Don')n(t)227 2767 y(start)20 b(w)o(orking)h(on)e(your)
i(allocator)g(until)g(you)e(understand)k(e)n(v)o(erything)f(about)e
(the)g(simple)g(implicit)g(list)g(allocator)-5 b(.)136
2955 y Fg(\017)46 b Ff(Encapsulate)30 b(your)f(pointer)g(arithmetic)g
(in)e(C)g(pr)m(epr)l(ocessor)j(macr)l(os.)42 b Fk(Pointer)28
b(arithmetic)h(in)e(memory)h(man-)227 3068 y(agers)k(is)e(confusing)k
(and)d(error)n(-prone)i(because)g(of)d(all)h(the)g(casting)h(that)f(is)
g(necessary)-6 b(.)52 b(Y)-10 b(ou)31 b(can)g(reduce)h(the)227
3181 y(comple)o(xity)26 b(signi\002cantly)g(by)e(writing)g(macros)g
(for)g(your)g(pointer)i(operations.)31 b(See)23 b(the)h(te)o(xt)g(for)g
(e)o(xamples.)136 3368 y Fg(\017)46 b Ff(Use)23 b(a)h(pr)l(o\002ler)-10
b(.)30 b Fk(Y)-10 b(ou)23 b(may)h(\002nd)f(the)h Fj(gprof)c
Fk(tool)k(helpful)h(for)f(optimizing)i(performance.)136
3556 y Fg(\017)46 b Ff(Start)24 b(early!)30 b Fk(It)23
b(is)f(possible)j(to)e(write)g(an)g(ef)n(\002cient)h(malloc)f(package)i
(with)e(a)f(fe)n(w)g(pages)i(of)f(code.)29 b(Ho)n(we)n(v)o(er)l(,)23
b(we)227 3669 y(can)h(guarantee)i(that)f(it)e(will)g(be)h(some)g(of)f
(the)h(most)g(dif)n(\002cult)g(and)g(sophisticated)k(code)c(you)g(ha)n
(v)o(e)h(written)f(so)g(f)o(ar)227 3782 y(in)g(your)g(career)-5
b(.)30 b(So)23 b(start)h(early)-6 b(,)24 b(and)g(good)h(luck!)0
4113 y Fi(12)119 b(Mor)n(e)30 b(Hints)0 4360 y Fk(A)36
b(good)i(malloc)f(package)i(requires)g(ef)n(\002cient)f(manipulation)i
(of)d(the)g(a)n(v)n(ailable)j(free)d(space.)70 b(The)37
b(quality)i(of)e(the)0 4473 y(package)26 b(is)d(measured)i(in)e(terms)h
(of:)136 4699 y Fg(\017)46 b Fk(Space)24 b(Utilization)i(:)i(Ho)n(w)22
b(much)i(total)g(memory)g(does)h(the)e(package)j(consume)f(to)e
(ful\002ll)h(the)g(requests.)336 4887 y Fh(\226)46 b
Fk(Each)34 b(allocated/free)j(block)e(needs)g(some)e(o)o(v)o(erhead)i
(space)g(for)f(bookk)o(eeping)j(or)d(as)f(implementation)427
5000 y(o)o(v)o(erhead.)49 b(F)o(or)28 b(e)o(xample:)42
b(headers)32 b(and)e(footers)h(are)e(needed)j(in)d(an)g(implicit)i
(list)f(for)g(f)o(ast)g(coalescing;)427 5113 y(our)24
b(malloc)g(needs)h(space)g(for)e(request)p 1689 5113
28 4 v 36 w(ids.)29 b(W)-7 b(e)22 b(w)o(ant)i(to)f(k)o(eep)i(this)f(o)o
(v)o(erhead)h(small.)336 5259 y Fh(\226)46 b Fk(W)-7
b(e)32 b(w)o(ant)g(to)g(a)n(v)n(oid)i(fragmentation)i(of)c(free)h
(blocks)h(into)f(small)f(non-contiguous)37 b(chunks,)f(since)e(the)o(y)
427 5372 y(cannot)25 b(be)f(combined)h(to)f(ful\002ll)f(a)h(lar)n(ge)g
(request.)1924 5712 y(8)p eop
%%Page: 9 9
9 8 bop 136 573 a Fg(\017)46 b Fk(Speed)24 b(:)29 b(Ho)n(w)22
b(much)i(time)f(does)h(the)g(package)i(tak)o(e)e(to)f(allocate/free)k
(a)c(block.)336 760 y Fh(\226)46 b Fk(W)-7 b(e)23 b(w)o(ant)g(to)h
(able)g(to)g(locate)g(the)g(appropriate)j(block)e(in)e(the)h(free)g
(list)g(as)f(quickly)j(as)d(possible.)336 907 y Fh(\226)46
b Fk(Y)-10 b(ou)19 b(should)i(think)f(about)g(what)f(a)f(typical)j
(sequence)g(of)e(calls)h(to)f Fj(mm)p 2631 907 28 4 v
31 w(realloc)c Fk(looks)21 b(lik)o(e)e(and)h(optimize)427
1020 y(for)27 b(that)g(case.)38 b(Y)-10 b(our)26 b(goal)h(should)h(be)f
(to)f(minimize)h(the)g(number)g(of)f(times)h Fj(mm)p
3045 1020 V 32 w(realloc)22 b Fk(is)k(forced)i(to)427
1132 y(return)c(a)d(pointer)j(to)e(a)g(ne)n(w)f(memory)h(area)h
(\(since)g(this)g(in)l(v)n(olv)o(es)i(an)d(e)o(xpensi)n(v)o(e)i(call)e
(to)g Fj(mm)p 3387 1132 V 32 w(malloc)c Fk(and)427 1245
y Fj(memcpy)p Fk(\).)0 1472 y(Basically)-6 b(,)31 b(we)c(w)o(ant)h(to)g
(design)h(an)f(algorithm)i(+)e(data-structure)k(for)c(managing)i(our)e
(free)h(blocks)g(that)g(achie)n(v)o(es)h(the)0 1585 y(right)35
b(balance)g(of)f(space)g(utilization)j(and)d(speed.)60
b(Note)34 b(that)g(there)g(is)g(a)f(tradeof)n(f)i(between)g(space)g
(utilization)h(and)0 1698 y(speed.)29 b(F)o(or)22 b(space,)h(we)f(w)o
(ant)g(to)g(k)o(eep)i(our)e(internal)i(data)f(structures)i(small.)k
(Also,)22 b(while)h(allocating)i(a)c(free)i(block,)h(we)0
1811 y(w)o(ant)j(to)h(do)f(a)g(thorough)j(\(and)f(hence)f(slo)n(w\))g
(scan)g(of)f(the)h(free)g(blocks,)i(to)d(e)o(xtract)i(a)e(block)h(that)
g(best)g(\002ts)f(our)h(needs.)0 1924 y(F)o(or)e(speed,)i(we)d(w)o(ant)
i(f)o(ast)g(\(and)g(hence)h(complicated\))h(data)e(structures)j(that)d
(consume)h(more)e(space.)39 b(Here)26 b(are)h(some)0
2037 y(of)c(the)h(design)h(options)h(a)n(v)n(ailable)g(to)d(us.)136
2263 y Fg(\017)46 b Fk(Data)24 b(Structures)h(to)e(or)n(ganize)j(free)e
(blocks:)336 2451 y Fh(\226)46 b Fk(Implicit)25 b(Free)e(List)336
2597 y Fh(\226)46 b Fk(Explicit)25 b(Free)e(List)336
2743 y Fh(\226)46 b Fk(Se)o(gre)o(gated)25 b(Lists/Search)g(T)m(rees)
136 2931 y Fg(\017)46 b Fk(Algorithms)25 b(to)f(scan)g(free)g(blocks:)
336 3119 y Fh(\226)46 b Fk(First)24 b(Fit/Ne)o(xt)f(Fit)336
3265 y Fh(\226)46 b Fk(Blocks)25 b(sorted)f(by)g(address)h(with)f
(First)f(Fit)336 3411 y Fh(\226)46 b Fk(Best)24 b(Fit)0
3638 y(Y)-10 b(ou)25 b(can)g(pick)g(\(almost\))h(an)o(y)f(combination)j
(from)c(the)h(tw)o(o.)32 b(F)o(or)24 b(e)o(xample,)i(you)f(can)g
(implement)h(an)f(e)o(xplicit)h(free)g(list)0 3750 y(with)c(ne)o(xt)g
(\002t,)e(a)i(se)o(gre)o(gated)h(list)f(with)g(best)g(\002t,)f(and)h
(so)g(on.)28 b(Also,)22 b(you)g(can)g(b)n(uild)h(on)f(a)f(w)o(orking)i
(implementation)i(of)c(a)0 3863 y(simple)i(data)g(structure)h(to)f(a)e
(more)i(complicated)h(one.)29 b(Thus,)22 b(you)h(can)g(implement)g(an)g
(implicit)g(free)g(list,)f(then)h(change)0 3976 y(it)g(to)h(an)f(e)o
(xplicit)i(list,)f(then)g(se)o(gre)o(gate)h(the)f(e)o(xplicit)h(lists)f
(and)g(so)g(on.)0 4128 y(The)i Fj(mm-helper.c)20 b Fk(\002le)25
b(pro)o(vided)j(to)e(you)g(implements)i(an)e(implicit)h(free)f(list)g
(with)g(\002rst)g(\002t,)f(without)i(deb)n(ugging.)0
4241 y(Starting)h(from)f(this,)h(you)f(can)h(b)n(uild)g(an)f(e)o
(xplicit)h(list)f(with)g(deb)n(ugging)j(-)d(you)g(w)o(ould)g(need)h(to)
f(add)g(an)g(id)g(\002eld)g(to)g(the)0 4354 y(allocated)i(blocks;)g
(and)e(ne)o(xt)f(and)h(pre)n(vious)h(pointers)g(to)e(the)h(free)f
(blocks.)39 b(A)25 b(good)i(heapcheck)o(er)j(can)c(come)g(in)h(v)o(ery)
0 4467 y(handy)k(to)f(catch)h(b)n(ugs.)49 b(Once)29 b(you)i(get)f(an)g
(e)o(xplicit)h(list)f(w)o(orking,)j(you)d(can)g(e)o(xplore)i(more)e(f)o
(anc)o(y)g(scan)h(algorithms)0 4580 y(\(ne)o(xt)23 b(\002t,best)f
(\002t)f(...\).)27 b(Y)-10 b(ou)22 b(can)g(e)o(xplore)i(algorithms)g
(for)e(coalescing)j(that)d(ha)n(v)o(e)h(less)g(o)o(v)o(erhead.)30
b(If)21 b(you)i(wish,)f(you)h(can)0 4693 y(e)o(xpand)i(into)f(se)o(gre)
o(gated)h(lists)g(or)e(search)i(trees.)1924 5712 y(9)p
eop
%%Trailer
end
userdict /end-hook known{end-hook}if
%%EOF
